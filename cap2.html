<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>Procesamiento</title>

<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/flatly.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="site_libs/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<script src="site_libs/kePrint-0.0.1/kePrint.js"></script>
<link href="site_libs/font-awesome-5.1.0/css/all.css" rel="stylesheet" />
<link href="site_libs/font-awesome-5.1.0/css/v4-shims.css" rel="stylesheet" />




<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>




<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
</style>


<style type="text/css">
/* padding for bootstrap navbar */
body {
  padding-top: 60px;
  padding-bottom: 40px;
}
/* offset scroll position for anchor links (for fixed navbar)  */
.section h1 {
  padding-top: 65px;
  margin-top: -65px;
}
.section h2 {
  padding-top: 65px;
  margin-top: -65px;
}
.section h3 {
  padding-top: 65px;
  margin-top: -65px;
}
.section h4 {
  padding-top: 65px;
  margin-top: -65px;
}
.section h5 {
  padding-top: 65px;
  margin-top: -65px;
}
.section h6 {
  padding-top: 65px;
  margin-top: -65px;
}
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #ffffff;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script>
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.parent().addClass('active');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  background: white;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row-fluid">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-inverse  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Proyecto Final de Programación <br>Raúl Mejía González</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">
    <span class="fa fa-home"></span>
     
    Presentación
  </a>
</li>
<li>
  <a href="cap1.html">
    <span class="fa fa-tasks"></span>
     
    Metodología
  </a>
</li>
<li>
  <a href="cap2.html">
    <span class="fa fa-building"></span>
     
    Procesamiento
  </a>
</li>
<li>
  <a href="cap3.html">
    <span class="fa fa-bar-chart"></span>
     
    Resultados
  </a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div class="fluid-row" id="header">



<h1 class="title toc-ignore"><strong>Procesamiento</strong></h1>

</div>


<div class=text-justify>

<p><br> <br></p>
<div id="descripción-del-tratamiento-de-la-base-de-datos-de-captura-para-obtener-la-base-de-datos-de-explotación" class="section level1">
<h1>Descripción del tratamiento de la base de datos de captura, para obtener la base de datos de explotación</h1>
<p><br></p>
<p>El objetivo de este apartado es describir el registro puntual de cada de una de las acciones realizadas para la preparación, validación e integración de la Base de Datos, desde la salida de captura, hasta la versión final, para su explotación y análisis.</p>
<p><br> <br></p>
<div id="descarga-de-la-base-de-datos" class="section level2">
<h2>Descarga de la Base de Datos</h2>
<p><br></p>
<p>La base de datos fue descargada de la plataforma de <a href="https://mysurvey.solutions" target="_blank"><em>Survey Solutions</em></a> en formato SPSS (.sav).</p>
<p>Debido a que no se cuenta con licencia de dicho software comercial, se convirtieron las tablas a formato <em>.csv</em>, empleando la aplicación <em>Stat/Transfer</em> (software libre).</p>
<p>Una vez descargadas las tablas, el procesamiento de las mismas se realizó completamente en el lenguaje de programación R, excepto en todas aquellas situaciones previas que se describen a continuación, en las que fue necesario hacer ligeros ajustes manuales a ciertos registros de la tabla <em>establecimientos.csv</em>.</p>
<p><br> <br></p>
</div>
<div id="descripción-de-la-base-de-datos-descargada" class="section level2">
<h2>Descripción de la Base de Datos descargada</h2>
<p><br></p>
<p>La carpeta descargada contiene las siguientes tablas (previamente transformadas a formato delimitado por comas <em>csv</em>):</p>
<ol style="list-style-type: decimal">
<li><p><strong>assignment_actions.csv</strong>: Tabla donde se registran cambios de asignación. Sin registros en la prueba, al no haberse realizado reasignaciones.</p></li>
<li><p><strong>interview_errors.csv</strong>: Tabla donde se registran los errores que la propia plataforma reporta como error de la aplicación. Se tiene un sólo registro, lo que demuestra que sólo en una ocasión la plataforma falló durante el operativo.</p></li>
<li><p><strong>interview_comments.csv</strong>: Contiene 105 registros con los comentarios registrados por el entrevistador hacia el supervisor, o bien los realizados por el administrador en la plataforma central (sede).</p></li>
<li><p><strong>interview_diagnostics.csv</strong>: 151 registros correspondientes principalmente a los tiempos de duración de las entrevistas.</p></li>
<li><p><strong>establecimientos.csv</strong>: Contiene 151 registros. Muestra los datos generales del establecimiento, coordenadas, control de la entrevista y campo de observaciones.</p></li>
<li><p><strong>lista_residuos.csv</strong>: Tabla con 157 registros, que corresponden al tipo y número de residuos declarados por los establecimientos.</p></li>
<li><p><strong>lista_tiporesiduos.csv</strong>: Con 199 registros, comprende la captación de las características, cantidades y destinos de los residuos declarados en los establecimientos.</p></li>
</ol>
<p><br></p>
<p>Todas estas tablas pueden encontrarse en la carpeta llamada <em>bd_captura</em>.</p>
<p><br> <br></p>
</div>
<div id="descripción-de-cambios-aplicados" class="section level2">
<h2>Descripción de cambios aplicados</h2>
<p><br></p>
<ol style="list-style-type: decimal">
<li>Se realizan cambios manuales a la tabla <em>establecimientos.csv</em>. Este proceso no es programable. Todas las tablas revisadas y validadas que se generan según los procedimientos descritos aquí, conformarán la base de datos para explotación, y se denominarán agregando el numero 2 al nombre original de la tabla, a efecto de diferenciarlas como segunda versión de las mismas.</li>
</ol>
<p><br></p>
<ol start="2" style="list-style-type: decimal">
<li>Para los comercios ambulantes, en los que se asignó durante el operativo un ID (campo V4) con un formato: <em>número de equipo</em> + <em>consecutivo del establecimiento ambulante</em>, se les reasigna un ID númérico de forma manual, concatenando los siguientes números: <em>99999</em> + <em>Número de equipo durante el operativo</em> + <em>Consecutivo del establecimiento ambulante</em>, a efecto de homogenizar el campo a tipo numérico, y filtrar con mayor facilidad dichos establecimientos en la explotación.</li>
</ol>
<p><br></p>
<ol start="3" style="list-style-type: decimal">
<li>Se agregan a 30 registros en la tabla <em>establecimientos.csv</em>, los datos de latitud y longitud. Este proceso debió llevarse a cabo de forma manual, debido a las dificultades para ubicar cada unidad económica en el mapa. Quedaron algunas unidades económicas sin asignar coordenadas, debido a que no se les pudo ubicar, sin embargo, se trata de establecimientos no permanentes. Las coordenadas asignadas fueron:</li>
</ol>
<p><br></p>
<center>
<div style="border: 1px solid #ddd; padding: 0px; overflow-y: scroll; height:400px; overflow-x: scroll; width:450px; ">
<table class="table table-striped table-bordered" style="width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
Llave
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
ID (DENUE)
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
Latitud
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
Longitud
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
04-05-29-04
</td>
<td style="text-align:right;">
6790694
</td>
<td style="text-align:right;">
21.88275
</td>
<td style="text-align:right;">
-102.2583
</td>
</tr>
<tr>
<td style="text-align:left;">
07-42-68-66
</td>
<td style="text-align:right;">
36324
</td>
<td style="text-align:right;">
21.88395
</td>
<td style="text-align:right;">
-102.2971
</td>
</tr>
<tr>
<td style="text-align:left;">
12-54-30-22
</td>
<td style="text-align:right;">
52082
</td>
<td style="text-align:right;">
21.88918
</td>
<td style="text-align:right;">
-102.2517
</td>
</tr>
<tr>
<td style="text-align:left;">
17-23-45-49
</td>
<td style="text-align:right;">
6282263
</td>
<td style="text-align:right;">
21.87438
</td>
<td style="text-align:right;">
-102.2553
</td>
</tr>
<tr>
<td style="text-align:left;">
18-90-43-80
</td>
<td style="text-align:right;">
48987
</td>
<td style="text-align:right;">
22.07548
</td>
<td style="text-align:right;">
-102.2734
</td>
</tr>
<tr>
<td style="text-align:left;">
20-39-37-73
</td>
<td style="text-align:right;">
29226
</td>
<td style="text-align:right;">
21.87352
</td>
<td style="text-align:right;">
-102.2464
</td>
</tr>
<tr>
<td style="text-align:left;">
22-93-40-85
</td>
<td style="text-align:right;">
7565
</td>
<td style="text-align:right;">
21.89292
</td>
<td style="text-align:right;">
-102.2750
</td>
</tr>
<tr>
<td style="text-align:left;">
23-97-42-63
</td>
<td style="text-align:right;">
1819
</td>
<td style="text-align:right;">
21.89342
</td>
<td style="text-align:right;">
-102.3156
</td>
</tr>
<tr>
<td style="text-align:left;">
31-01-70-00
</td>
<td style="text-align:right;">
8221
</td>
<td style="text-align:right;">
21.89126
</td>
<td style="text-align:right;">
-102.2725
</td>
</tr>
<tr>
<td style="text-align:left;">
32-78-66-91
</td>
<td style="text-align:right;">
25930
</td>
<td style="text-align:right;">
22.07807
</td>
<td style="text-align:right;">
-102.2727
</td>
</tr>
<tr>
<td style="text-align:left;">
37-67-74-84
</td>
<td style="text-align:right;">
51662
</td>
<td style="text-align:right;">
21.88889
</td>
<td style="text-align:right;">
-102.2739
</td>
</tr>
<tr>
<td style="text-align:left;">
39-20-84-48
</td>
<td style="text-align:right;">
99999528
</td>
<td style="text-align:right;">
21.87890
</td>
<td style="text-align:right;">
-102.2929
</td>
</tr>
<tr>
<td style="text-align:left;">
41-05-66-05
</td>
<td style="text-align:right;">
51653
</td>
<td style="text-align:right;">
21.88925
</td>
<td style="text-align:right;">
-102.2739
</td>
</tr>
<tr>
<td style="text-align:left;">
41-72-60-47
</td>
<td style="text-align:right;">
6886730
</td>
<td style="text-align:right;">
21.79579
</td>
<td style="text-align:right;">
-102.7152
</td>
</tr>
<tr>
<td style="text-align:left;">
47-44-56-58
</td>
<td style="text-align:right;">
8292
</td>
<td style="text-align:right;">
21.88743
</td>
<td style="text-align:right;">
-102.2726
</td>
</tr>
<tr>
<td style="text-align:left;">
48-40-47-85
</td>
<td style="text-align:right;">
6282322
</td>
<td style="text-align:right;">
21.89054
</td>
<td style="text-align:right;">
-102.2739
</td>
</tr>
<tr>
<td style="text-align:left;">
52-81-44-27
</td>
<td style="text-align:right;">
51657
</td>
<td style="text-align:right;">
21.88925
</td>
<td style="text-align:right;">
-102.2736
</td>
</tr>
<tr>
<td style="text-align:left;">
53-98-17-94
</td>
<td style="text-align:right;">
6758020
</td>
<td style="text-align:right;">
22.09442
</td>
<td style="text-align:right;">
-102.2964
</td>
</tr>
<tr>
<td style="text-align:left;">
59-86-22-78
</td>
<td style="text-align:right;">
25962
</td>
<td style="text-align:right;">
22.07687
</td>
<td style="text-align:right;">
-102.2730
</td>
</tr>
<tr>
<td style="text-align:left;">
60-62-73-58
</td>
<td style="text-align:right;">
99999540
</td>
<td style="text-align:right;">
21.87863
</td>
<td style="text-align:right;">
-102.3124
</td>
</tr>
<tr>
<td style="text-align:left;">
65-31-27-49
</td>
<td style="text-align:right;">
27688
</td>
<td style="text-align:right;">
21.89126
</td>
<td style="text-align:right;">
-102.2725
</td>
</tr>
<tr>
<td style="text-align:left;">
67-78-81-26
</td>
<td style="text-align:right;">
49755
</td>
<td style="text-align:right;">
20.53786
</td>
<td style="text-align:right;">
-102.3842
</td>
</tr>
<tr>
<td style="text-align:left;">
69-25-05-13
</td>
<td style="text-align:right;">
10355
</td>
<td style="text-align:right;">
21.87609
</td>
<td style="text-align:right;">
-102.2546
</td>
</tr>
<tr>
<td style="text-align:left;">
70-15-01-95
</td>
<td style="text-align:right;">
8295
</td>
<td style="text-align:right;">
21.88676
</td>
<td style="text-align:right;">
-102.2728
</td>
</tr>
<tr>
<td style="text-align:left;">
72-22-26-38
</td>
<td style="text-align:right;">
5175
</td>
<td style="text-align:right;">
21.87007
</td>
<td style="text-align:right;">
-102.2954
</td>
</tr>
<tr>
<td style="text-align:left;">
75-96-72-76
</td>
<td style="text-align:right;">
6166248
</td>
<td style="text-align:right;">
22.16778
</td>
<td style="text-align:right;">
-102.3456
</td>
</tr>
<tr>
<td style="text-align:left;">
78-93-50-99
</td>
<td style="text-align:right;">
8249
</td>
<td style="text-align:right;">
21.89325
</td>
<td style="text-align:right;">
-102.2707
</td>
</tr>
<tr>
<td style="text-align:left;">
83-39-13-04
</td>
<td style="text-align:right;">
8225
</td>
<td style="text-align:right;">
21.89126
</td>
<td style="text-align:right;">
-102.2725
</td>
</tr>
<tr>
<td style="text-align:left;">
84-05-91-99
</td>
<td style="text-align:right;">
6758020
</td>
<td style="text-align:right;">
22.09415
</td>
<td style="text-align:right;">
-102.2962
</td>
</tr>
</tbody>
</table>
</div>
</center>
<p><br></p>
<ol start="4" style="list-style-type: decimal">
<li>En un establecimiento se detectó que las coordenadas no eran correctas (tabla <em>establecimientos.csv</em>), por lo que se corrigieron en la BD de forma manual:</li>
</ol>
<table style="width:100%;">
<colgroup>
<col width="13%" />
<col width="11%" />
<col width="16%" />
<col width="19%" />
<col width="19%" />
<col width="19%" />
</colgroup>
<thead>
<tr class="header">
<th align="left"><strong>Llave</strong></th>
<th align="left"><strong>ID (DENUE)</strong></th>
<th align="right"><strong>Latitud original</strong></th>
<th align="right"><strong>Longitud original</strong></th>
<th align="right"><strong>Latitud corregida</strong></th>
<th align="right"><strong>Longitud original</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">32-04-68-91</td>
<td align="left">8974</td>
<td align="right">21.8477653</td>
<td align="right">-102.2808157</td>
<td align="right">21.832729</td>
<td align="right">-102.289223</td>
</tr>
</tbody>
</table>
<p><br></p>
<ol start="5" style="list-style-type: decimal">
<li>Se modificaron en la tabla <em>establecimientos.csv</em>, de forma manual los códigos del campo V3 (que define si es prueba de configuración o levantamiento) del valor 1 al 2, para las siguentes llaves: 53-27-23-59, 98-38-33-96, 77-06-67-30.</li>
</ol>
<p><br></p>
<ol start="6" style="list-style-type: decimal">
<li>Se cambia manualmente en la tabla <em>establecimientos.csv</em> el valor del campo V4 (que corresponde al ID del DENUE) en los siguientes registros, que se detectaron erróneos:</li>
</ol>
<center>
<table class="table table-striped table-bordered" style="width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;">
Llave
</th>
<th style="text-align:right;">
V4 erróneo
</th>
<th style="text-align:right;">
V4 corregida
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
65-51-61-06
</td>
<td style="text-align:right;">
2168
</td>
<td style="text-align:right;">
1168
</td>
</tr>
<tr>
<td style="text-align:left;">
22-07-32-82
</td>
<td style="text-align:right;">
1198
</td>
<td style="text-align:right;">
1249
</td>
</tr>
<tr>
<td style="text-align:left;">
96-57-45-57
</td>
<td style="text-align:right;">
3402
</td>
<td style="text-align:right;">
34012
</td>
</tr>
<tr>
<td style="text-align:left;">
24-07-91-89
</td>
<td style="text-align:right;">
143
</td>
<td style="text-align:right;">
99999143
</td>
</tr>
</tbody>
</table>
</center>
<p><br></p>
<ol start="7" style="list-style-type: decimal">
<li>Se eliminan los siguientes campos para cada tabla, sea por tratarse de campos sin información (como en el caso de campos reservados a captura de texto que no fue necesario utilizar), o por contener información de control del propio sistema, como son el registro de errores y asignaciones, que en realidad no resultan de utilidad para la explotación. Esto se hace con R, y el código se localiza en el archivo <strong>procesamiento_bd.R</strong>, incluido en la carpeta.</li>
</ol>
<p><br></p>
<center>
<div style="border: 1px solid #ddd; padding: 0px; overflow-y: scroll; height:400px; overflow-x: scroll; width:600px; ">
<table class="table table-striped table-bordered" style="width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
Tabla
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
Campo eliminado
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
Observaciones
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
establecimientos.csv
</td>
<td style="text-align:left;">
V15
</td>
<td style="text-align:left;">
Campo para nombre de persona que atendería en la reprogramación. Se utilizó para casos que serán filtrados como entrevistas sin respuesta por lo que es innecesario mantenerlo
</td>
</tr>
<tr>
<td style="text-align:left;">
establecimientos.csv
</td>
<td style="text-align:left;">
V16
</td>
<td style="text-align:left;">
Campo para fecha de reprogramación. Se utilizó para casos que serán filtrados como entrevistas sin respuesta por lo que es innecesario mantenerlo
</td>
</tr>
<tr>
<td style="text-align:left;">
establecimientos.csv
</td>
<td style="text-align:left;">
V26_1
</td>
<td style="text-align:left;">
Campo adicional para texto. No se utilizó
</td>
</tr>
<tr>
<td style="text-align:left;">
establecimientos.csv
</td>
<td style="text-align:left;">
V26_2
</td>
<td style="text-align:left;">
Campo adicional para texto. No se utilizó
</td>
</tr>
<tr>
<td style="text-align:left;">
establecimientos.csv
</td>
<td style="text-align:left;">
V26_3
</td>
<td style="text-align:left;">
Campo adicional para texto. No se utilizó
</td>
</tr>
<tr>
<td style="text-align:left;">
establecimientos.csv
</td>
<td style="text-align:left;">
V26_4
</td>
<td style="text-align:left;">
Campo adicional para texto. No se utilizó
</td>
</tr>
<tr>
<td style="text-align:left;">
establecimientos.csv
</td>
<td style="text-align:left;">
V27_0
</td>
<td style="text-align:left;">
Campo adicional para texto. No se utilizó
</td>
</tr>
<tr>
<td style="text-align:left;">
establecimientos.csv
</td>
<td style="text-align:left;">
V30
</td>
<td style="text-align:left;">
Campo del sistema. Sin datos
</td>
</tr>
<tr>
<td style="text-align:left;">
establecimientos.csv
</td>
<td style="text-align:left;">
V31
</td>
<td style="text-align:left;">
Campo del sistema. Datos sin utilidad para la explotación
</td>
</tr>
<tr>
<td style="text-align:left;">
establecimientos.csv
</td>
<td style="text-align:left;">
V32
</td>
<td style="text-align:left;">
Campo del sistema. Datos sin utilidad para la explotación
</td>
</tr>
<tr>
<td style="text-align:left;">
establecimientos.csv
</td>
<td style="text-align:left;">
V33
</td>
<td style="text-align:left;">
Campo del sistema. Datos sin utilidad para la explotación
</td>
</tr>
<tr>
<td style="text-align:left;">
establecimientos.csv
</td>
<td style="text-align:left;">
V34
</td>
<td style="text-align:left;">
Campo del sistema. Datos sin utilidad para la explotación
</td>
</tr>
<tr>
<td style="text-align:left;">
interview_diagnostics.csv
</td>
<td style="text-align:left;">
V3
</td>
<td style="text-align:left;">
Campo del sistema. Datos sin utilidad para la explotación
</td>
</tr>
<tr>
<td style="text-align:left;">
interview_diagnostics.csv
</td>
<td style="text-align:left;">
V5
</td>
<td style="text-align:left;">
Campo del sistema. Datos sin utilidad para la explotación
</td>
</tr>
<tr>
<td style="text-align:left;">
interview_diagnostics.csv
</td>
<td style="text-align:left;">
V6
</td>
<td style="text-align:left;">
Campo del sistema. Datos sin utilidad para la explotación
</td>
</tr>
<tr>
<td style="text-align:left;">
interview_diagnostics.csv
</td>
<td style="text-align:left;">
V7
</td>
<td style="text-align:left;">
Campo del sistema. Datos sin utilidad para la explotación
</td>
</tr>
<tr>
<td style="text-align:left;">
interview_diagnostics.csv
</td>
<td style="text-align:left;">
V8
</td>
<td style="text-align:left;">
Campo del sistema. Datos sin utilidad para la explotación
</td>
</tr>
<tr>
<td style="text-align:left;">
interview_diagnostics.csv
</td>
<td style="text-align:left;">
V9
</td>
<td style="text-align:left;">
Campo del sistema. Datos sin utilidad para la explotación
</td>
</tr>
<tr>
<td style="text-align:left;">
interview_comments.csv
</td>
<td style="text-align:left;">
V3
</td>
<td style="text-align:left;">
Campo del sistema. Datos sin utilidad para la explotación
</td>
</tr>
<tr>
<td style="text-align:left;">
interview_comments.csv
</td>
<td style="text-align:left;">
V4
</td>
<td style="text-align:left;">
Campo del sistema. Datos sin utilidad para la explotación
</td>
</tr>
<tr>
<td style="text-align:left;">
interview_comments.csv
</td>
<td style="text-align:left;">
V5
</td>
<td style="text-align:left;">
Campo del sistema. Datos sin utilidad para la explotación
</td>
</tr>
<tr>
<td style="text-align:left;">
interview_comments.csv
</td>
<td style="text-align:left;">
V7
</td>
<td style="text-align:left;">
Campo del sistema. Datos sin utilidad para la explotación
</td>
</tr>
<tr>
<td style="text-align:left;">
interview_comments.csv
</td>
<td style="text-align:left;">
V11
</td>
<td style="text-align:left;">
Campo del sistema. Datos sin utilidad para la explotación
</td>
</tr>
<tr>
<td style="text-align:left;">
interview_comments.csv
</td>
<td style="text-align:left;">
V12_0
</td>
<td style="text-align:left;">
Campo adicional para texto. No se utilizó
</td>
</tr>
<tr>
<td style="text-align:left;">
interview_comments.csv
</td>
<td style="text-align:left;">
V12_1
</td>
<td style="text-align:left;">
Campo adicional para texto. No se utilizó
</td>
</tr>
<tr>
<td style="text-align:left;">
lista_tiporesiduos.csv
</td>
<td style="text-align:left;">
V5_0
</td>
<td style="text-align:left;">
Campo adicional para texto. No se utilizó
</td>
</tr>
<tr>
<td style="text-align:left;">
lista_tiporesiduos.csv
</td>
<td style="text-align:left;">
V5_1
</td>
<td style="text-align:left;">
Campo adicional para texto. No se utilizó
</td>
</tr>
<tr>
<td style="text-align:left;">
lista_tiporesiduos.csv
</td>
<td style="text-align:left;">
V14_0
</td>
<td style="text-align:left;">
Campo adicional para texto. No se utilizó
</td>
</tr>
<tr>
<td style="text-align:left;">
lista_tiporesiduos.csv
</td>
<td style="text-align:left;">
V14_1
</td>
<td style="text-align:left;">
Campo adicional para texto. No se utilizó
</td>
</tr>
<tr>
<td style="text-align:left;">
lista_tiporesiduos.csv
</td>
<td style="text-align:left;">
V18
</td>
<td style="text-align:left;">
Campo para especificar otra unidad para residuos a bancos de alimentos. No se utilizó
</td>
</tr>
</tbody>
</table>
</div>
</center>
<p><br></p>
<ol start="8" style="list-style-type: decimal">
<li>Se elimina el registro con llave 99-53-17-80 de la tabla <em>establecimientos.csv</em>, por no contener ninguna información.</li>
</ol>
<p><br></p>
<ol start="9" style="list-style-type: decimal">
<li>Se asignan nombres en R, a las variables de las tablas resultantes, de acuerdo con el FD previamente diseñado, conforme a lo siguiente:</li>
</ol>
<p><br></p>
<center>
<p><strong><em>Tabla: establecimientos.csv</em></strong></p>
<div style="border: 1px solid #ddd; padding: 0px; overflow-y: scroll; height:400px; overflow-x: scroll; width:600px; ">
<table class="table table-striped table-bordered" style="width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
Campo
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
Mnemónico asignado
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
Descripción
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
V2
</td>
<td style="text-align:left;">
folio_sist
</td>
<td style="text-align:left;">
Folio asignado al registro por el sistema
</td>
</tr>
<tr>
<td style="text-align:left;">
V3
</td>
<td style="text-align:left;">
tipo
</td>
<td style="text-align:left;">
Tipo de entrevista
</td>
</tr>
<tr>
<td style="text-align:left;">
V4
</td>
<td style="text-align:left;">
id_denue
</td>
<td style="text-align:left;">
Identificador del establecimiento según su registro en el DENUE
</td>
</tr>
<tr>
<td style="text-align:left;">
V5
</td>
<td style="text-align:left;">
latitud
</td>
<td style="text-align:left;">
Latitud de la coordenada geográfica
</td>
</tr>
<tr>
<td style="text-align:left;">
V6
</td>
<td style="text-align:left;">
longitud
</td>
<td style="text-align:left;">
Longitud de la coordenada geográfica
</td>
</tr>
<tr>
<td style="text-align:left;">
V7
</td>
<td style="text-align:left;">
prec
</td>
<td style="text-align:left;">
Precisión de la coordenada geográfica
</td>
</tr>
<tr>
<td style="text-align:left;">
V8
</td>
<td style="text-align:left;">
altitud
</td>
<td style="text-align:left;">
Altitud SNM de la coordenada geográfica
</td>
</tr>
<tr>
<td style="text-align:left;">
V10
</td>
<td style="text-align:left;">
planeado
</td>
<td style="text-align:left;">
Define si el establecimiento corresponde a lo planeado en muestra
</td>
</tr>
<tr>
<td style="text-align:left;">
V11
</td>
<td style="text-align:left;">
nvo_establec
</td>
<td style="text-align:left;">
Nombre del nuevo establecimiento
</td>
</tr>
<tr>
<td style="text-align:left;">
V12
</td>
<td style="text-align:left;">
saludo
</td>
<td style="text-align:left;">
Define si se localiza al dueño o encargado
</td>
</tr>
<tr>
<td style="text-align:left;">
V13
</td>
<td style="text-align:left;">
acepta
</td>
<td style="text-align:left;">
Define si el informante acepta la entrevista al momento
</td>
</tr>
<tr>
<td style="text-align:left;">
V17
</td>
<td style="text-align:left;">
consumo
</td>
<td style="text-align:left;">
Tipo de consumo de los alimentos que se manejan
</td>
</tr>
<tr>
<td style="text-align:left;">
V18
</td>
<td style="text-align:left;">
mercado
</td>
<td style="text-align:left;">
Tipo de mercado de los alimentos que se manejan
</td>
</tr>
<tr>
<td style="text-align:left;">
V19
</td>
<td style="text-align:left;">
residuos_vc
</td>
<td style="text-align:left;">
Existencia de Residuos de vegetal crudo
</td>
</tr>
<tr>
<td style="text-align:left;">
V20
</td>
<td style="text-align:left;">
residuos_vp
</td>
<td style="text-align:left;">
Existencia de Residuos de vegetal procesado
</td>
</tr>
<tr>
<td style="text-align:left;">
V21
</td>
<td style="text-align:left;">
residuos_ac
</td>
<td style="text-align:left;">
Existencia de Residuos de animal crudo
</td>
</tr>
<tr>
<td style="text-align:left;">
V22
</td>
<td style="text-align:left;">
residuos_ap
</td>
<td style="text-align:left;">
Existencia de Residuos de animal procesado
</td>
</tr>
<tr>
<td style="text-align:left;">
V23
</td>
<td style="text-align:left;">
residuos_ot
</td>
<td style="text-align:left;">
Existencia de Residuos de otro tipo
</td>
</tr>
<tr>
<td style="text-align:left;">
V24
</td>
<td style="text-align:left;">
ot_residuos_e
</td>
<td style="text-align:left;">
Especifica residuos de otro tipo
</td>
</tr>
<tr>
<td style="text-align:left;">
V25
</td>
<td style="text-align:left;">
despedida
</td>
<td style="text-align:left;">
Se leyó despedida
</td>
</tr>
<tr>
<td style="text-align:left;">
V26
</td>
<td style="text-align:left;">
obs_1
</td>
<td style="text-align:left;">
Observaciones del entrevistador
</td>
</tr>
<tr>
<td style="text-align:left;">
V26_0
</td>
<td style="text-align:left;">
obs_2
</td>
<td style="text-align:left;">
Observaciones del entrevistador
</td>
</tr>
<tr>
<td style="text-align:left;">
V27
</td>
<td style="text-align:left;">
obs_3
</td>
<td style="text-align:left;">
Observaciones del entrevistador
</td>
</tr>
<tr>
<td style="text-align:left;">
V28
</td>
<td style="text-align:left;">
obs_4
</td>
<td style="text-align:left;">
Observaciones del entrevistador
</td>
</tr>
<tr>
<td style="text-align:left;">
V29
</td>
<td style="text-align:left;">
obs_5
</td>
<td style="text-align:left;">
Observaciones del entrevistador
</td>
</tr>
</tbody>
</table>
</div>
<p><br></p>
<p><strong><em>Tabla: interview_comments.csv</em></strong></p>
<table class="table table-striped table-bordered" style="width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;">
Campo
</th>
<th style="text-align:left;">
Mnemónico asignado
</th>
<th style="text-align:left;">
Descripción
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
V2
</td>
<td style="text-align:left;">
folio_sist
</td>
<td style="text-align:left;">
Folio asignado al registro por el sistema
</td>
</tr>
<tr>
<td style="text-align:left;">
V6
</td>
<td style="text-align:left;">
estatus
</td>
<td style="text-align:left;">
Estado de la entrevista al momento de la descarga
</td>
</tr>
<tr>
<td style="text-align:left;">
V8
</td>
<td style="text-align:left;">
fecha_com
</td>
<td style="text-align:left;">
Fecha en la que se registró el comentario
</td>
</tr>
<tr>
<td style="text-align:left;">
V9
</td>
<td style="text-align:left;">
hora_com
</td>
<td style="text-align:left;">
Hora en la que se registró el comentario
</td>
</tr>
<tr>
<td style="text-align:left;">
V10
</td>
<td style="text-align:left;">
autor_com
</td>
<td style="text-align:left;">
Figura operativa que realizó el comentario
</td>
</tr>
<tr>
<td style="text-align:left;">
V12
</td>
<td style="text-align:left;">
comentario
</td>
<td style="text-align:left;">
Comentario
</td>
</tr>
</tbody>
</table>
<p><br></p>
<p><strong><em>Tabla: interview_diagnostics.csv</em></strong></p>
<table class="table table-striped table-bordered" style="width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;">
Campo
</th>
<th style="text-align:left;">
Mnemónico asignado
</th>
<th style="text-align:left;">
Descripción
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
V2
</td>
<td style="text-align:left;">
folio_sist
</td>
<td style="text-align:left;">
Folio asignado al registro por el sistema
</td>
</tr>
<tr>
<td style="text-align:left;">
V4
</td>
<td style="text-align:left;">
entrev
</td>
<td style="text-align:left;">
Nominativo del entrevistador que levantó el cuestionario
</td>
</tr>
<tr>
<td style="text-align:left;">
V10
</td>
<td style="text-align:left;">
durac
</td>
<td style="text-align:left;">
Duración de la entrevista en minutos
</td>
</tr>
</tbody>
</table>
<p><br></p>
<p><strong><em>Tabla: lista_residuos.csv</em></strong></p>
<table class="table table-striped table-bordered" style="width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;">
Campo
</th>
<th style="text-align:left;">
Mnemónico asignado
</th>
<th style="text-align:left;">
Descripción
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
V2
</td>
<td style="text-align:left;">
folio_sist
</td>
<td style="text-align:left;">
Folio asignado al registro por el sistema
</td>
</tr>
<tr>
<td style="text-align:left;">
V3
</td>
<td style="text-align:left;">
tipo_resid
</td>
<td style="text-align:left;">
Código correspondiente al tipo de residuo declarado
</td>
</tr>
<tr>
<td style="text-align:left;">
V4
</td>
<td style="text-align:left;">
num_resid
</td>
<td style="text-align:left;">
Número de residuos declarados
</td>
</tr>
</tbody>
</table>
<p><br></p>
<p><strong><em>Tabla: lista_tiporesiduos.csv</em></strong></p>
<div style="border: 1px solid #ddd; padding: 0px; overflow-y: scroll; height:400px; overflow-x: scroll; width:600px; ">
<table class="table table-striped table-bordered" style="width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
Campo
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
Mnemónico asignado
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
Descripción
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
V2
</td>
<td style="text-align:left;">
folio_sist
</td>
<td style="text-align:left;">
Folio asignado al registro por el sistema
</td>
</tr>
<tr>
<td style="text-align:left;">
V3
</td>
<td style="text-align:left;">
tipo_resid
</td>
<td style="text-align:left;">
Código correspondiente al tipo de residuo declarado
</td>
</tr>
<tr>
<td style="text-align:left;">
V4
</td>
<td style="text-align:left;">
consec_residuo
</td>
<td style="text-align:left;">
Consecutivo del residuo declarado. Se suma 1 a cada registro para inicializar la cuenta en 1
</td>
</tr>
<tr>
<td style="text-align:left;">
V5
</td>
<td style="text-align:left;">
nombre_residuo
</td>
<td style="text-align:left;">
Descripción del residuo reportado
</td>
</tr>
<tr>
<td style="text-align:left;">
V6
</td>
<td style="text-align:left;">
cantidad_resid
</td>
<td style="text-align:left;">
Cantidad del residuo reportado
</td>
</tr>
<tr>
<td style="text-align:left;">
V7
</td>
<td style="text-align:left;">
unidad_resid
</td>
<td style="text-align:left;">
Unidad de medida del residuo reportado
</td>
</tr>
<tr>
<td style="text-align:left;">
V8
</td>
<td style="text-align:left;">
otra_unidad
</td>
<td style="text-align:left;">
Especifica otra unidad de medida del residuo reportado
</td>
</tr>
<tr>
<td style="text-align:left;">
V9
</td>
<td style="text-align:left;">
cant_r_no_comes
</td>
<td style="text-align:left;">
Cantidad del residuo reportado que es no comestible
</td>
</tr>
<tr>
<td style="text-align:left;">
V10
</td>
<td style="text-align:left;">
unid_r_no_comes
</td>
<td style="text-align:left;">
Unidad de medida del residuo reportado que es no comestible
</td>
</tr>
<tr>
<td style="text-align:left;">
V11
</td>
<td style="text-align:left;">
otra_ur_no_comes
</td>
<td style="text-align:left;">
Especifica otra unidad de medida del residuo reportado que es no comestible
</td>
</tr>
<tr>
<td style="text-align:left;">
V12
</td>
<td style="text-align:left;">
t_colecta
</td>
<td style="text-align:left;">
Periodo en el que reúne los residuos
</td>
</tr>
<tr>
<td style="text-align:left;">
V13
</td>
<td style="text-align:left;">
otro_t_colecta
</td>
<td style="text-align:left;">
Especifica otro periodo en el que reúne los residuos
</td>
</tr>
<tr>
<td style="text-align:left;">
V14
</td>
<td style="text-align:left;">
causa_desecho
</td>
<td style="text-align:left;">
Principal causa por la que se producen los residuos o desechos
</td>
</tr>
<tr>
<td style="text-align:left;">
V15
</td>
<td style="text-align:left;">
destino
</td>
<td style="text-align:left;">
Principal destino de los residuos
</td>
</tr>
<tr>
<td style="text-align:left;">
V16
</td>
<td style="text-align:left;">
cant_banco
</td>
<td style="text-align:left;">
Cantidad de residuos que se destinan a Banco de alimentos / comedor público
</td>
</tr>
<tr>
<td style="text-align:left;">
V17
</td>
<td style="text-align:left;">
unidad_banco
</td>
<td style="text-align:left;">
Unidad de medida de la cantidad de residuos que se destinan a Banco de alimentos / comedor público
</td>
</tr>
<tr>
<td style="text-align:left;">
V19
</td>
<td style="text-align:left;">
otro_destino
</td>
<td style="text-align:left;">
Especifica otro principal destino de los residuos
</td>
</tr>
<tr>
<td style="text-align:left;">
V20
</td>
<td style="text-align:left;">
autoriza_imag
</td>
<td style="text-align:left;">
Autoriza fotografiar imagen de residuos
</td>
</tr>
<tr>
<td style="text-align:left;">
V21
</td>
<td style="text-align:left;">
imagen_resid
</td>
<td style="text-align:left;">
Identifica nombre de imagen de residuos en la BD
</td>
</tr>
</tbody>
</table>
</div>
</center>
<p><br></p>
<ol start="10" style="list-style-type: decimal">
<li><p>Se filtran y dejan para integrar la base de datos de explotación, únicamente aquellos casos en los que se consiguió entrevista completa (se generaran o no residuos). En esta etapa se excluyen todos aquellos registros que se encuentran en una o más de las siguientes situaciones:</p>
<p>10.1 Establecimientos que cerraron o están abandonados, ya no se localizan en el sitio, cambiaron de giro a alguna clase de actividad no relacionada con alimentos, o es un giro distinto relacionado con alimentos, pero no se captaron.</p>
<p>10.2 Establecimientos en los que no pudo entrevistarse al informante adecuado, o no abrieron.</p>
<p>10.3 Negativas a la entrevista, o que refieren que debe consultarse a su corporativo.</p>
<p>10.4 Registros con código 1 pruebas de configuración del instrumento.</p>
<p>10.5 Registros rechazados por el supervisor</p></li>
</ol>
<p><br></p>
<ol start="11" style="list-style-type: decimal">
<li>En cualquiera de los casos anteriores, el filtro a aplicar toma la siguiente expresión: <strong>establecimientos.acepta = 1 and establecimientos.tipo = 2 and interview_comments.estatus &lt;&gt; @<span class="citation">@RejectedBySupervisor</span></strong>, es decir, todos aquellos establecimientos en los que se aceptó la entrevista, durante el operativo real de la prueba piloto, que fueron aceptados. Esto está en el archivo <em>procesamiento_bd.R</em>.</li>
</ol>
<p><br></p>
<ol start="12" style="list-style-type: decimal">
<li>Una vez filtrados los registros válidos, se le adicionan mediante <em>JOIN</em> los campos provenientes de la muestra: <em>nombre_establecimiento, codigo_scian, personas_ocupadas, municipio, tipo_unidad_economica, sector_scian, tipo_actividad</em>, queda con un total de <strong>120 registros, y 33 campos</strong>. Para esto se usa la librería <em>sqlidf</em></li>
</ol>
<p><br></p>
<ol start="13" style="list-style-type: decimal">
<li>La tabla resultante se guarda con el nombre <em>establecimientos2.csv</em>. En la misma se hacen algunos cambios manuales, según lo siguiente:</li>
</ol>
<p><br></p>
<center>
<div style="border: 1px solid #ddd; padding: 0px; overflow-y: scroll; height:400px; overflow-x: scroll; width:600px; ">
<table class="table table-striped table-bordered" style="width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
Llave del registro o condición lógica
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
Descripción del cambio realizado
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
53-27-23-59
</td>
<td style="text-align:left;">
sector_scian = Terciario
</td>
</tr>
<tr>
<td style="text-align:left;">
53-27-23-59
</td>
<td style="text-align:left;">
tipo_actividad = Restaurantes / servicio de preparación de alimentos
</td>
</tr>
<tr>
<td style="text-align:left;">
53-27-23-59
</td>
<td style="text-align:left;">
personas_ocupadas = 0 a 5 personas
</td>
</tr>
<tr>
<td style="text-align:left;">
53-27-23-59
</td>
<td style="text-align:left;">
municipio = Aguascalientes
</td>
</tr>
<tr>
<td style="text-align:left;">
66-30-95-73
</td>
<td style="text-align:left;">
tipo_unidad_economica = Fijo
</td>
</tr>
<tr>
<td style="text-align:left;">
75-88-19-43
</td>
<td style="text-align:left;">
tipo_unidad_economica = Fijo
</td>
</tr>
<tr>
<td style="text-align:left;">
75-88-19-43
</td>
<td style="text-align:left;">
sector_scian = Terciario
</td>
</tr>
<tr>
<td style="text-align:left;">
75-88-19-43
</td>
<td style="text-align:left;">
personas_ocupadas = 0 a 5 personas
</td>
</tr>
<tr>
<td style="text-align:left;">
75-88-19-43
</td>
<td style="text-align:left;">
municipio = Aguascalientes
</td>
</tr>
<tr>
<td style="text-align:left;">
58-57-15-91
</td>
<td style="text-align:left;">
tipo_unidad_economica = Fijo
</td>
</tr>
<tr>
<td style="text-align:left;">
77-06-67-30
</td>
<td style="text-align:left;">
tipo_unidad_economica = Fijo
</td>
</tr>
<tr>
<td style="text-align:left;">
98-38-33-96
</td>
<td style="text-align:left;">
tipo_unidad_economica = Fijo
</td>
</tr>
<tr>
<td style="text-align:left;">
id_denue &gt;= 99999133
</td>
<td style="text-align:left;">
tipo_unidad_economica = Ambulante
</td>
</tr>
<tr>
<td style="text-align:left;">
id_denue &gt;= 99999003
</td>
<td style="text-align:left;">
sector_scian = Terciario
</td>
</tr>
<tr>
<td style="text-align:left;">
id_denue &gt;= 99999003
</td>
<td style="text-align:left;">
personas_ocupadas = 0 a 5 personas
</td>
</tr>
<tr>
<td style="text-align:left;">
id_denue &gt;= 99999003
</td>
<td style="text-align:left;">
municipio = Aguascalientes
</td>
</tr>
<tr>
<td style="text-align:left;">
66-30-95-73
</td>
<td style="text-align:left;">
municipio = Aguascalientes
</td>
</tr>
<tr>
<td style="text-align:left;">
66-30-95-73
</td>
<td style="text-align:left;">
sector_scian = Terciario
</td>
</tr>
</tbody>
</table>
</div>
</center>
<p><br></p>
<ol start="14" style="list-style-type: decimal">
<li>Se obtienen las tablas restantes <em>interview_diagnostics2.csv</em>, <em>lista_residuos2.csv</em>, y <em>lista_tiporesiduos2.csv</em> depuradas con sólo registros de entrevistas válidas, y complementadas con variables adicionales de la muestra. Se generan con las variables de la muestra, mediante un operador JOIN. Estas cuatro tablas más la de muestra original conforman la <strong>Base de Datos para explotación</strong>, y se deposita en la carpeta <em>bd_explot</em>.</li>
</ol>
<p><br></p>
<ol start="15" style="list-style-type: decimal">
<li>En esta última carpeta se depositan también las tablas <em>huerta.csv</em>, que contiene datos proporcionados de forma independiente por la empacadora de verduras “La Huerta”, y otra denominada <em>obs.csv</em>, que contiene las observaciones generales que se registraron en un formato en papel y que diariamente son capturadas por los propios entrevistadores y enviadas a la sede central por correo electrónico.</li>
</ol>
<p><br></p>
<ol start="16" style="list-style-type: decimal">
<li>La base <em>bd_explot</em> en la que se descartan las tablas que son innecesarias para el procesamiento de la información, queda conformada entonces del siguiente modo:</li>
</ol>
<p><br></p>
<center>
<table class="table table-striped table-bordered" style="width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;">
Tabla
</th>
<th style="text-align:right;">
Número de registros
</th>
<th style="text-align:right;">
Número de campos
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
interview_diagnostics2.csv
</td>
<td style="text-align:right;">
120
</td>
<td style="text-align:right;">
9
</td>
</tr>
<tr>
<td style="text-align:left;">
lista_residuos2.csv
</td>
<td style="text-align:right;">
152
</td>
<td style="text-align:right;">
10
</td>
</tr>
<tr>
<td style="text-align:left;">
lista_tiporesiduos2.csv
</td>
<td style="text-align:right;">
191
</td>
<td style="text-align:right;">
26
</td>
</tr>
<tr>
<td style="text-align:left;">
huerta.csv
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
9
</td>
</tr>
<tr>
<td style="text-align:left;">
obs.csv
</td>
<td style="text-align:right;">
480
</td>
<td style="text-align:right;">
1
</td>
</tr>
</tbody>
</table>
</center>
<p><br></p>
<p>Como dato adicional, de las 120 entrevistas de la tabla <em>interview_diagnostics2.csv</em>, 89 corresponden a establecimientos fijos o semifijos, y 31 a establecimientos ambulantes.</p>
<p><br> <br></p>
</div>
<div id="integración-de-la-base-de-datos" class="section level2">
<h2>Integración de la Base de Datos</h2>
<p><br></p>
<p>Una vez aplicados todos los cambios descritos arriba, se procedió a integrar la base de datos en un formato estructurado <em>db</em>, y generar los archivos de metadatos complementarios para su conocimiento y adecuado uso.</p>
<p>Para este proceso se hace uso de SQLite, que es un sistema par gestión de bases de datos relacional, que es de dominio público y por lo tanto, gratuito.</p>
<p>SQLite posee una interfaz con un menú muy intuitivo que permite la importación de tablas <em>csv</em> entre otras, lo que facilita mucho el armado de una base de datos desde cero, cuando ya se tienen tablas elaboradas en Excel, LibreOffice Calc o alguna otra hoja de cálculo. Esta ventaja es la que se ha utilizado en nuestro caso, ya que la base de datos se integra a partir de dos conjuntos de tablas, a saber:</p>
<ol style="list-style-type: decimal">
<li><p>Las tablas generadas por la plataforma de captura (<em>Survey Solutions</em>), que contienen los datos recabados en las entrevistas a través del cuestionario electrónico, estructuradas de modo relacional, y que han sido depuradas y validadas previamente, conforme a los procedimientos descritos en el apartado anterior.</p></li>
<li><p>Las tablas creadas para propósitos de control operativo de la prueba piloto. Contienen los listados de las figuras operativas de la encuesta (entrevistadores, coordinadores), datos de contacto, horarios y grupos de capacitación, credenciales de acceso a los servidores y en general la información necesaria para conocer los pormenores de estas figuras. La tabla que contiene la muestra se incluye en este conjunto. Se trata de una muestra dirigida (no probabilística), por lo que no se cuenta con un diseño estadístico de la misma. Los resultados de este ejercicio nos brindarán algunos elementos para generar precisamente dicho diseño. <strong>La tabla muestra, como podrá verse en el diagrama entidad-relación más adelante, funciona como el enlace entre ambos conjuntos de tablas.</strong> Estas tablas, dado que se fueron armando conforme se crearon los grupos de trabajo, no requieren validación ni procesamiento previo.</p></li>
</ol>
<p><br></p>
<p>Como resultado de los procedimientos anteriores, se conformó la base de datos denominada <a href="bd_pp_eramo2020/pp_eramo2020.db"><strong>pp_eramo2020.db</strong></a>.</p>
<p>Cuyo diagrama entidad relación es el siguiente:</p>
<p><br></p>
<div class="figure" style="text-align: center">
<img src="bd_pp_eramo2020/procesamiento/diag_ent_rel.png" alt="**Diagrama Entidad-Relación de la Base de Datos**" width="95%" />
<p class="caption">
<strong>Diagrama Entidad-Relación de la Base de Datos</strong>
</p>
</div>
<p><br></p>
<p>Donde el archivo de descripción (FD) es el siguiente:</p>
<p><br></p>
<center>
<p><strong>FD de la Base de Datos de la PP ERAMO 2020</strong> <br></p>
<iframe width="700" height="481" frameborder="0" scrolling="no" src="https://onedrive.live.com/embed?resid=B1C61545BBEEC34C%21680&amp;authkey=%21AHJtJyE53ZmOQPg&amp;em=2&amp;wdAllowInteractivity=False&amp;ActiveCell=&#39;ERAMO-Establecimientos&#39;!A1&amp;wdHideGridlines=True&amp;wdHideHeaders=True&amp;wdDownloadButton=True&amp;wdInConfigurator=True">
</iframe>
</center>
<p><br></p>
</div>
</div>
</div>
</div>



</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open')
  });
});
</script>

<!-- code folding -->

<script>
$(document).ready(function ()  {

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
